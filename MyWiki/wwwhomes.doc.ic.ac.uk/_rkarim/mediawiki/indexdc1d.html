<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&oldid=996 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 12 Mar 2018 13:28:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="robots" content="noindex,nofollow" />
		<meta name="keywords" content="Selecting regions polygonal mesh" />
		<link rel="shortcut icon" href="http://wwwhomes.doc.ic.ac.uk/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/opensearch_desc.php" title="Rashed Karim Wiki (en)" />
		<link rel="alternate" type="application/rss+xml" title="Rashed Karim Wiki RSS Feed" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Rashed Karim Wiki Atom Feed" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Selecting regions polygonal mesh - Rashed Karim Wiki</title>
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/common/shared.css?207" type="text/css" media="screen" />
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/common/commonPrint.css?207" type="text/css" media="print" />
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/monobook/main.css?207" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/~rkarim/mediawiki/skins/monobook/IE50Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/~rkarim/mediawiki/skins/monobook/IE55Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/~rkarim/mediawiki/skins/monobook/IE60Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/~rkarim/mediawiki/skins/monobook/IE70Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" media="print" />
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/~rkarim/mediawiki/skins/common/IEFixes.js?207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/~rkarim/mediawiki/skins";
		var wgArticlePath = "http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=$1";
		var wgScriptPath = "/~rkarim/mediawiki";
		var wgScript = "http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://wwwhomes.doc.ic.ac.uk/";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Selecting_regions_polygonal_mesh";
		var wgTitle = "Selecting regions polygonal mesh";
		var wgAction = "view";
		var wgArticleId = 170;
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 996;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/common/wikibits.js?207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/common/ajax.js?207"></script>
		<script type="text/javascript" src="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Selecting_regions_polygonal_mesh skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Selecting regions polygonal mesh</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Rashed Karim Wiki</h3>
			<div id="contentSub">
				<div id="mw-revision-info">Revision as of 14:00, 5 August 2011 by <a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=User:Admin&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:Admin (page does not exist)">Admin</a>  <span class="mw-usertoollinks">(<a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=User_talk:Admin&amp;action=edit&amp;redlink=1" class="new" title="User talk:Admin (page does not exist)">Talk</a>&#32;|&#32;<a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:Contributions/Admin" title="Special:Contributions/Admin">contribs</a>)</span></div>

				<div id="mw-revision-nav">(<a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&amp;diff=prev&amp;oldid=996" title="Selecting regions polygonal mesh">diff</a>) <a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&amp;direction=prev&amp;oldid=996" title="Selecting regions polygonal mesh">← Older revision</a>&#32;|&#32;Current revision (diff)&#32;|&#32;Newer revision → (diff)</div>
			</div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<a name="Required_classes" id="Required_classes"></a><h2> <span class="mw-headline"> Required classes </span></h2>
<ul><li> <a href="http://www.vtk.org/doc/nightly/html/classvtkSelectPolyData.html#a5a9f44090d56904b44df3afea10ceae8" class="external text" title="http://www.vtk.org/doc/nightly/html/classvtkSelectPolyData.html#a5a9f44090d56904b44df3afea10ceae8" rel="nofollow">vtkSelectPolyData</a> 
</li><li> <a href="http://www.vtk.org/doc/nightly/html/classvtkClipPolyData.html" class="external text" title="http://www.vtk.org/doc/nightly/html/classvtkClipPolyData.html" rel="nofollow">vtkClipPolyData</a> - to perform clipping (useful for visualization)
</li></ul>
<a name="Details" id="Details"></a><h2> <span class="mw-headline"> Details </span></h2>
<a name="Specifying_region_selection" id="Specifying_region_selection"></a><h3> <span class="mw-headline"> Specifying region selection </span></h3>
<p>The selected region is what is known as a 'loop'. These are a list of points defining the selected region. It is important that they are not self intersecting. What this really means is that you need the points to come in the correct order. So if you are drawing a polygon, these points need to come in the right order along the polygon border. Here is code that I wrote to select cell vertices (more reliable I found than picking points) and then the 'first' vertex of the cell becomes the point picked. Note _pointList is of type vtkPoints. 
</p>
<pre>
double vert_xyz[3];
int num_vert; 
vtkIdType vertID;
vtkCell* cell; 
cell = _atriumPoly_CD-&gt;GetCell(cellID); 

vtkSmartPointer&lt;vtkIdList&gt; cell_vert = vtkSmartPointer&lt;vtkIdList&gt;::New();
_atriumPoly_CD-&gt;GetCellPoints(cellID, cell_vert); 

vertID = cell_vert-&gt;GetId(0);
_atriumPoly_CD-&gt;GetPoint(vertID,  vert_xyz);
_pickedPointIDs.push_back(vertID);
_pointList-&gt;InsertPoint(_ptSeq++, vert_xyz[0], vert_xyz[1], vert_xyz[2]); 
</pre>
<a name="Running_the_filter" id="Running_the_filter"></a><h3> <span class="mw-headline"> Running the filter </span></h3>
<p>It is very important that you can see the points you have selected to define the loop. Normally, vtkpointpicker and cellpicker's may select points that are not exactly where you want them to be (I have found them to work say 7 out of 10 times). In these cases, the loop needs to be re-defined and point selection needs to be reset. Also, the 'cannot follow edge' error is common when the loop is incorrectly defined with self-intersecting edges between the loop points. It is also important to triangulate the polygonal mesh before running it through the filter. This can easily be done using the vtkTriangleFilter filter. 
</p><p>The input of the filter is the polygonal mesh. The output when GenerateSelectionScalarsOn() is set, is the same polygonal mesh however with a <b>new set</b> of scalars. The scalars specify the (positive) distance of each point within the selection to the loop border. Outside the loop, this distance is also maintained, however, this time the distance is negative. See image for an illustration. 
</p>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=File:VtkSelectPolyDataExample.png" class="image" title="Endocardial views of the ostium in reconstructed left atrium segmentations."><img alt="" src="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/images/thumb/c/c2/VtkSelectPolyDataExample.png/250px-VtkSelectPolyDataExample.png" width="250" height="130" border="0" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=File:VtkSelectPolyDataExample.png" class="internal" title="Enlarge"><img src="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>Endocardial views of the ostium in reconstructed left atrium segmentations.</div></div></div>
<pre> 
loop-&gt;SetLoop(selectionPoints);
loop-&gt;GenerateSelectionScalarsOn();
loop-&gt;SetSelectionModeToLargestRegion(); 
loop-&gt;Update();
</pre>
<p>The output of the filter can be post-processed by looking at the scalars that receive a positive distance value. The best way to clip this polydata based on scalars is to use vtkClipPolyData. 
</p>
<a name="Clipping_the_output" id="Clipping_the_output"></a><h3> <span class="mw-headline"> Clipping the output </span></h3>
<p><a href="http://www.vtk.org/doc/nightly/html/classvtkClipPolyData.html" class="external text" title="http://www.vtk.org/doc/nightly/html/classvtkClipPolyData.html" rel="nofollow">vtkClipPolyData</a> will clip polydata based on an implicit function or scalars. We need to use the latter here. The output of vtkSelectPolyData filter is a polygonal mesh with scalars that are either positive or negative (depending on whether the point/cell is inside or outside the loop). The vtkClipPolyData can be set to extract the selected region based on these scalars. 
</p><p>An example of extracting the polygonal mesh from the output of the vtkSelectPolyData is given <a href="http://www.vtk.org/Wiki/VTK/Examples/Cxx/PolyData/SelectPolyData" class="external text" title="http://www.vtk.org/Wiki/VTK/Examples/Cxx/PolyData/SelectPolyData" rel="nofollow">here</a>. 
</p>
<pre>
loop-&gt;SetLoop(selectionPoints);
loop-&gt;GenerateSelectionScalarsOn();
loop-&gt;SetSelectionModeToLargestRegion(); //negative scalars inside
loop-&gt;Update();

outputPoly-&gt;DeepCopy(loop-&gt;GetOutput());
VBC_resetUnwantedScalars(outputPoly, isCellData, -1e3, 1e3, -1);
vtkSmartPointer&lt;vtkClipPolyData&gt; clip = vtkSmartPointer&lt;vtkClipPolyData&gt;::New();
clip-&gt;SetInput(outputPoly);
clip-&gt;Update();	
clippedPoly-&gt;DeepCopy(clip-&gt;GetOutput());
</pre>

<!-- 
NewPP limit report
Preprocessor node count: 15/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key rkarim:pcache:idhash:170-0!1!0!!en!2!edit=0 and timestamp 20180312122921 -->
<div class="printfooter">
Retrieved from "<a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh">http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh</a>"</div>
						<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Talk:Selecting_regions_polygonal_mesh&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-viewsource"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				 <li id="ca-history"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=User:159.92.151.128" title="The user page for the ip you&#039;re editing as [.]" accesskey="." class="new">159.92.151.128</a></li>
				<li id="pt-anontalk"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=User_talk:159.92.151.128" title="Discussion about edits from this IP address [n]" accesskey="n" class="new">Talk for this IP</a></li>
				<li id="pt-anonlogin"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Selecting_regions_polygonal_mesh" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/images/myWikiLogo.gif);" href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Research_Wiki" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Research_Wiki">Main Page</a></li>
				<li id="n-Home"><a href="http://www.doc.ic.ac.uk/~rkarim/">Home</a></li>
				<li id="n-currentevents"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Rashed_Karim_Wiki:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Help:Contents" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Rashed Karim Wiki [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:WhatLinksHere/Selecting_regions_polygonal_mesh" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:RecentChangesLinked/Selecting_regions_polygonal_mesh" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&amp;oldid=996&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&amp;oldid=996" title="Permanent link to this revision of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
					<li id="privacy"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Rashed_Karim_Wiki:Privacy_policy" title="Rashed Karim Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Rashed_Karim_Wiki:About" title="Rashed Karim Wiki:About">About Rashed Karim Wiki</a></li>
					<li id="disclaimer"><a href="http://wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Rashed_Karim_Wiki:General_disclaimer" title="Rashed Karim Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.435 secs. --></body>
<!-- Mirrored from wwwhomes.doc.ic.ac.uk/~rkarim/mediawiki/index.php?title=Selecting_regions_polygonal_mesh&oldid=996 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 12 Mar 2018 13:28:04 GMT -->
</html>
